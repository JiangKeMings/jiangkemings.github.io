---
layout: default
title: Home
---

<div class="posts" id="aimArticles">

<table class="tableTags" id="tags">
</table>

</div>

<!-- 获取所有的tags -->
<script type="text/javascript">
var str = '[ {% for post in site.posts %}\
  { "title": "{{ post.title }}"   ,\
    "tags" : "{{ post.tags  }}"   ,\
    "url"  : "{{ post.url   }}"   ,\
    "date" : "{{ post.date | date_to_string }}"\
   }{% if forloop.last == false %},{% endif %}{% endfor %} ]';

var tagAndURL =  handleJSON(str,null,'{{site.url}}',true);

var tableBox = document.getElementById("tags");
var tableHTMLString = new String();
var index = 0;
for (var tag in tagAndURL) {
  var shouldBegin = index % 3 == 0;

  if (shouldBegin) {
     tableHTMLString += '<tr>';
  }

  tableHTMLString += '<td><a href="' + tagAndURL[tag] + '" id= '+ tag + ' class= "tag">'+ tag +'</a></td>';

  var shouldEnd = (index + 1) % 3 == 0;
  if (shouldEnd) {
    tableHTMLString += '</tr>';
  }
  index ++;
}
tableBox.innerHTML += tableHTMLString;

try {
  var params = window.location.href.getParamms();
//设置选中的tag
  var selectTag = document.getElementById(params.tag);
  selectTag.className = "selectTag";
  var aimArticles =  searchArticlesWithTag(params.tag);
  var htmlstr = new String();
  for (var index in aimArticles) {
     var  article = aimArticles[index];
      htmlstr += '<div class="post" id = "titlebody" ><h1 class="post-title"><a href= ' + article.url + '>' + article.title + '</a></h1><span class="post-date">' +  article.date +'</span></div>';
  }
  document.getElementById("aimArticles").innerHTML += htmlstr;
} catch (e) {
  if (AllArticles == null) {
     document.write("所有文章全局变量为空");
     throw e;
  }
  var htmlstr = new String();
  for (var index in AllArticles) {
     var  article = AllArticles[index];
      htmlstr += '<div class="post" id = "titlebody" ><h1 class="post-title"><a href= ' + article.url + '>' + article.title + '</a></h1><span class="post-date">' +  article.date +'</span></div>';
  }
  document.getElementById("aimArticles").innerHTML += htmlstr;
}
</script>
